{% extends 'index.njk' %}
{% import 'navArrows.njk' as navArrows %}


{% block main %}
  <div class="m1 h3">
    <span>Sorting by: {{sortby}}</span>
  </div>
  <div class="flex flex-justify m2" style="padding:10px 250px">
    {{ navArrows.leftArrow(page, sortby, direction, table) }}
    {{ navArrows.rightArrow(page, sortby, direction, table) }}
  </div>
  <div class="overflow-scroll">
    <table class="table-light">
      <thead>
      <tr>
        <th><a href="/stories?sortby=title&direction={{'1' if direction === '-1' else '-1' }}">Title</a></th>
        <th><a href="/stories?sortby=createdAt&direction={{ '1' if direction === '-1' else '-1' }}">Date Published</a></th>
        <th><a href="/stories?sortby=author.username&direction={{ '1' if direction === '-1' else '-1' }}">Author</a></th>
        <th>Deleted</th>
        <th>Flagged</th>
        <th>Edit</th>
      </tr>
      </thead>
      <tbody>
        {% for story in data %}
          <tr>
            <td>{{story.title}}</td>
            <td>{{story.createdAt}}</td>
            <td>{{story.author.username}}</td>
            <td>{{story.deleted}}</td>
            <td>{{story.flagged}}</td>
            <td> <a href="/stories/edit?id={{story._id}}"><i class="fa fa-pencil"></i></a></td>
          </tr>
        {%  endfor %}
      </tbody>
    </table>
  </div>

{% endblock %}
