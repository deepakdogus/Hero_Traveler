{% extends 'index.njk' %}
{% import 'navArrows.njk' as navArrows %}


{% block main %}
  <div class="m1 h3">
    <span>Sorting by: {{sortby}}</span>
  </div>
  <div class="flex flex-justify m2" style="padding:10px 250px">
    {{ navArrows.leftArrow(page, sortby, direction, table) }}
    {{ navArrows.rightArrow(page, sortby, direction, table) }}
  </div>
  <div class="flex m2 h4">
    <div class="ml1">Create New Category</div>
    <div class="ml1"><a href="/categories/create"><i class="fa fa-pencil"></i></a></div>
  </div>
  <div class="overflow-scroll">
    <table class="table-light">
      <thead>
      <tr>
        <th><a href="/categories?sortby=title&direction={{ '1' if direction === '-1' else '-1' }}">Title</a></th>
        <th><a href="/categories?sortby=createdAt&direction={{ '1' if direction === '-1' else '-1' }}">Date Created</a></th>
        <th>Image</th>
        <th>Edit</th>
      </tr>
      </thead>
      <tbody>
        {% for category in data %}
          {% set imagePath = category.image.versions.thumbnail240.path %}
          <tr>
            <td>{{category.title}}</td>
            <td>{{category.createdString}}</td>
            <td><img height="120" width="120" src="https://s3.amazonaws.com/hero-traveler/{{imagePath}}"/></td>
            <td> <a href="/categories/edit?id={{category._id}}"><i class="fa fa-pencil"></i></a></td>
          </tr>
        {%  endfor %}
      </tbody>
    </table>
  </div>

{% endblock %}
