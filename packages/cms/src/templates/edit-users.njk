{% extends 'index.njk' %}

{% macro optionTag(value, userRole) %}
  {% if value === userRole %} <option selected>
  {% else %} <option>
  {% endif %}
  {{ value }}</option>
{% endmacro %}

{% block main %}
  <form enctype="application/json" action="/users/edit?id={{data._id if data._id else 'new'}}" method="post" class="sm-col-4 m3">
    <label>Email Address</label>
    <input name="email" type="text" value="{{data.email}}" class="block col-12 mb1 field">
    <label>Username</label>
    <input name="username" type="text" value="{{data.username}}" class="block col-12 mb1 field">
    <label>Role</label>
    <select name="role" value="{{data.username}}" class="block col-12 mb1 field">
      {{ optionTag('user', data.role)}}
      {{ optionTag('admin', data.role)}}
      {{ optionTag('contributor', data.role)}}
      {{ optionTag('brand', data.role)}}
      {{ optionTag('founding member', data.role)}}
    </select>
    <label class="block col-12 mb2">
      <input name="featured" type="checkbox" checked>
      Featured User
    </label>
    <button type="submit" class="btn btn-primary">Change</button>
    <button type="reset" class="btn btn-primary black bg-gray">Cancel</button>
  </form>
  <button class="btn bg-red ml2"><a class="white" href="/users/delete?id={{data._id}}">Delete Entry</a></button>
  <div class="m2">{{ data }}</div>
{% endblock %}
